<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Discussions</title>
    <meta name="description" content="Overall Discussion">


    <link rel="stylesheet" href="/cloverflow-web/css/main.css">
    <link rel="stylesheet" href="/cloverflow-web/css/custom.css">
    <link rel="stylesheet" href="/cloverflow-web/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/cloverflow-web/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.2.2 -->
<title>Discussions | Toxic code snippets on Stack Overflow</title>
<meta property="og:title" content="Discussions" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Overall Discussion" />
<meta property="og:description" content="Overall Discussion" />
<link rel="canonical" href="http://localhost:4000/cloverflow-web/docs/discussions/" />
<meta property="og:url" content="http://localhost:4000/cloverflow-web/docs/discussions/" />
<meta property="og:site_name" content="Toxic code snippets on Stack Overflow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-10-24T22:58:15+01:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Discussions","datePublished":"2017-10-24T22:58:15+01:00","dateModified":"2017-10-24T22:58:15+01:00","description":"Overall Discussion","url":"http://localhost:4000/cloverflow-web/docs/discussions/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="http://localhost:4000/cloverflow-web/docs/discussions/">
    <link rel="alternate" type="application/rss+xml" title="Toxic code snippets on Stack Overflow" href="http://localhost:4000/cloverflow-web/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/cloverflow-web/">
                <span><img src="/cloverflow-web/img/logonav.png"></span> Toxic code snippets on Stack Overflow
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/cloverflow-web/docs/home/">Methodology &amp; Findings</a></li>
                <li><a href="/cloverflow-web/author.html">Authors</a></li>
                <li><a href="/cloverflow-web/downloads.html">Downloads</a></li>
                <li ><a href="/cloverflow-web/blog/2017/05/03/jekyll-doc-theme/">News</a></li>
            </ul>
            <div class="navbar-right">
                <!-- <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="text" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form> -->
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/aksakalli/jekyll-doc-theme"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
          Empirical Study &amp; Survey
        </a>
      </h4>
    </div>
    <div id="collapse-1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/cloverflow-web/docs/home/">Empirical Study</a>
        
          
          
          <a class="list-group-item " href="/cloverflow-web/docs/methodology/">Methodology</a>
        
          
          
          <a class="list-group-item " href="/cloverflow-web/docs/survey/">Stack Overflow User Survey</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
          Results &amp; Discussions
        </a>
      </h4>
    </div>
    <div id="collapse-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/cloverflow-web/docs/results/">Results</a>
        
          
          
          <a class="list-group-item active" href="/cloverflow-web/docs/discussions/">Discussions</a>
        
      </ul>
    </div>
  </div>

</div>

        </div>

        <div class="col-md-8">
            <h1>Discussions</h1>
            <div id="markdown-content-container"><h2 id="overall-discussion">Overall Discussion</h2>

<p>We designed our study in 6 phases as depicted in the figure below where
we build different data sets to answer each of our five research
questions.</p>

<p><img src="../../img/exp_framework.jpeg" alt="experimental framework" title="Experimental Framework" /></p>

<hr />

<h2 id="phase-1-clone-identification">Phase 1: Clone Identification</h2>

<h3 id="data-sets">Data Sets</h3>
<p>We rely on two source code data sets in this study: Java code snippets in answers
on Stack Overflow and open source projects from the <a href="http://qualitascorpus.com">Qualitas corpus</a>.</p>

<table>
  <thead>
    <tr>
      <th>Data set</th>
      <th>No. of files</th>
      <th>SLOC</th>
      <th>Median</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Stack Overflow</td>
      <td>72,365</td>
      <td>1,840,581</td>
      <td>17</td>
    </tr>
    <tr>
      <td>Qualitas</td>
      <td>166,709</td>
      <td>19,614,083</td>
      <td>60,667</td>
    </tr>
  </tbody>
</table>

<h3 id="clone-detection-tools">Clone Detection Tools</h3>
<ol>
  <li><a href="http://www.harukizaemon.com/simian/"><strong>Simian</strong></a> is a text-based clone detector that locates clones at line-level
granularity and has been used extensively in several clone
studies [(Ragkhitwetsagul et al., 2016),(Ragkhitwetsagul et al., 2017), (Wang et al., 2013), (Mondal et al., 2011), (Cheung et al., 2015), (Krinke et al., 2010)].</li>
  <li><a href="https://github.com/Mondego/SourcererCC"><strong>SourcererCC</strong></a> (Sajnani et al., 2016) is a scalable token-based clone
detector which detects clones, of type-1 up to type-3, at either function- or block-level granularity.</li>
</ol>

<h3 id="clone-detection-configuration">Clone Detection Configuration</h3>

<p>We configured Simian and
SourcererCC based on their established default configurations chosen by the
tools’ creators.</p>

<table>
  <thead>
    <tr>
      <th>Tool</th>
      <th>Configurations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Simian (<em>S</em>)</td>
      <td>Threshold=10, ignoreStringCase, ignoreCharacterCase, ignoreModifiers</td>
    </tr>
    <tr>
      <td>SourcererCC (<em>SCC</em>)</td>
      <td>Functions, Minimum clone size=10, Similarity=80%</td>
    </tr>
  </tbody>
</table>

<h3 id="number-of-online-clones-pairs">Number of Online Clones Pairs</h3>

<table>
  <thead>
    <tr>
      <th>Stats</th>
      <th>Total clone pairs</th>
      <th>Average clone size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Simian</td>
      <td>721</td>
      <td>16.61</td>
    </tr>
    <tr>
      <td>SourcererCC</td>
      <td>1,678</td>
      <td>17.86</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="phase-2-clone-merging">Phase 2: Clone Merging</h2>

<p>Clones from the two detectors can be
duplicated. To avoid double-counting of the same clone pair, we adopted the idea
of <strong>clone agreement</strong> (Bellon et al., 2007) which has been used in clone research
studies [(Funaro et al., 2010), (Wang et al., 2013), Ragkhitwetsagul et al., 2016)] to merge clones from two data sets. Clone pairs agreed by both clone detection tools have a high
likelihood to be duplicate and must be merged.</p>

<p><img src="../../img/clone_merging.png" alt="clone merging" title="Clone Merging Results" /></p>

<p>Using the ok-match criterion with a predefined threshold <em>t</em> of 0.7
similar to Bellon’s study (Bellon et al., 2007), we merge 721 clone pairs from
Simian and 1,678 clone pairs from SourcererCC into a single set of 2,302 online
clone pairs.</p>

<p>There are only 97 common clone pairs between the two clone sets
as depicted in the figure above.  The low number of common
clone pairs is due to SourcererCC reporting clones with method
boundaries while Simian is purely line-based.</p>

<hr />

<h2 id="phase-3-4-validation-and-classification">Phase 3-4: Validation and Classification</h2>

<p>We used the 2,302 merged clone pairs for
manual validation and classification.
The validation and classification of the pairs was done at the same time.
The clone validation process (phase 3 in the framework) involves checking
if a clone pair is a true positive or a false positive.</p>

<p>Moreover, we are also interested in
the patterns of code cloning so we can gain more insights into
how these clones are created (phase 4 in the framework).</p>

<h3 id="manual-investigation">Manual investigation</h3>
<p>To mitigate the human error, we deployed two persons in the manual clone
investigation process.
The two investigators separately went through each clone
pair candidate, looked at the clones, and decided if they are a true positive or
a false positive.</p>

<p><img src="../../img/classification_process.png" alt="classification process" title="Classification Process" /></p>

<p>Then, by following the step shown in the figure above, they classified the clones into an appropriate pattern as displayed in the table below. After the validation, the results from the two investigators were compared and conflicts were resolved.</p>

<h3 id="the-online-cloning-classification-patterns">The online cloning classification patterns</h3>

<table>
  <thead>
    <tr>
      <th>Pattern</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>QS</td>
      <td>Cloned from Qualitas project to Stack Overflow (Q –&gt; S)</td>
    </tr>
    <tr>
      <td>SQ</td>
      <td>Cloned from Stack Overflow to Qualitas project (S –&gt; Q)</td>
    </tr>
    <tr>
      <td>EX</td>
      <td>Cloned from an external source to Stack Overflow (X –&gt; S)</td>
    </tr>
    <tr>
      <td>UD</td>
      <td>Cloned from each other or from an external source outside the project (unknown)</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>BP</td>
      <td>Boiler-plate or IDE auto-generated</td>
    </tr>
    <tr>
      <td>IN</td>
      <td>Inheritance, interface implementation</td>
    </tr>
    <tr>
      <td>AC</td>
      <td>Accidental similarity, false clones</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="phase-5-outdated-clones">Phase 5: Outdated Clones</h2>

<p>To search for outdated online code clones, we focused on the <strong>QS</strong> clone
pairs that were cloned from Qualitas to Stack Overflow and compared them with
their latest versions. We downloaded the latest version of the Qualitas projects
from their repositories on October 3, 2017.</p>

<p>For each <strong>QS</strong> online clone
pair, we used the clone from Qualitas as a proxy. We searched for its latest
version by the file name and located the cloned region in the file based on the
method name or specific code statements. We then compared the Stack Overflow
snippet to its latest version line-by-line to find if any change has been made
to the source code.</p>

<p>We also made sure that the changes did not come from the
modifications made to the Stack Overflow snippets by the posters but from the
updates in the projects themselves. When we found inconsistent lines between the
two versions, we used <code class="highlighter-rouge">git blame</code> to see who modified those lines
of code and the timestamps. We also collected IDs of issue tracking information
if the code change is linked to an automatic issue tracking system, such as Jira
or BugZilla.</p>

<hr />

<h2 id="phase-6-licensing-analysis">Phase 6: Licensing Analysis</h2>

<p>We analysed licensing conflicts of the online clones in the <strong>QS</strong>,
<strong>EX</strong>, and <strong>UD</strong> set. The licenses were extracted by <a href="http://ninka.turingmachine.org/"><strong>Ninka</strong></a>,
an automatic license identification tool (German et al., 2010).</p>

<p>Since Ninka works at
file level, we report the findings based on Stack Overflow snippets and Qualitas
source files instead of the clone pairs (duplicates were ignored). For the ones
that could not be automatically identified by Ninka and have been reported as
<code class="highlighter-rouge">SeeFile</code> or <code class="highlighter-rouge">Unknown</code>, we looked at them manually
to see if any license can be found.</p>

<p>For EX clone pairs that are cloned from
external sources such as JDK or websites, we manually searched for the license
of the original code.</p>

<hr />
</div>
            <hr>
            





  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/cloverflow-web/docs/results/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        <li class="next disabled">
          <a>
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
    </div>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Toxic code snippets on Stack Overflow | University College London, UK &amp; University of Molise, Italy (2017) |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/cloverflow-web'
</script>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/cloverflow-web/js/bootstrap.min.js "></script>
<script src="/cloverflow-web/js/typeahead.bundle.min.js "></script>

<script src="/cloverflow-web/js/main.js "></script>

</body>

</html>
